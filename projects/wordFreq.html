<!DOCTYPE html>
<html lang="en">
<head>
  <title>Word Frequency Counter</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

  <!-- Local CSS -->
  <link rel="stylesheet" href="../css/styles.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


</head>
<body>
<div class="container">
		<div class="header clearfix">
			<nav>
				<ul class="nav nav-pills pull-right">
					<li role="presentation" class="active"><a href="../index.html">Home</a></li>
				</ul>
			</nav>
			<h3 class="text-muted">Simple Web Projects</h3>
		</div>

		<div class="jumbotron">
			<h2>Word Frequency Counter</h2>
			<p class="lead"> A primitive text area and input button facilitate an understanding of HashMaps utilizing Javascript Objects and sorting on both primary and secondary keys.</p>
			<!--  <p><a class="btn btn-lg btn-success" href="#" role="button">Sign up today</a></p> -->
		</div>
		<hr />

		<div class="row marketing">
			<center>
				<div class="row">
					<textarea id="textBody" rows="8" cols="48">And the Raven, never flitting, still is sitting, still is sitting On the pallid bust of Pallas just above my chamber door; And his eyes have all the seeming of a demon’s that is dreaming, And the lamp-light o’er him streaming throws his shadow on the floor; And my soul from out that shadow that lies floating on the floor Shall be lifted - nevermore!</textarea>
				</div>
				<div class="row" style="padding-top:12px;">
					<button type="submit">Count Words</button>
				</div>

				<div id="output" class="col-lg-12" style="padding-top:36px;">
					<table></table>
				</div>
			</center>
		</div>


		<footer class="footer">
			<p>&copy; 2017 Adam Rosenbaum</p>
		</footer>

	</div> <!-- /container -->




<script>
$(document).ready(function(){

    $("button").click(function(){
      $("#output").empty();
      $("#output").append("<hr />")
      // -- read in textbody from text area
        var textBody = $("#textBody").val().replace(/[.,!?;-]/g, '').split(" ");
      var dict = {}
      for(word in textBody){
        if(textBody[word] in dict){
          dict[textBody[word]] +=1;
        }else{
          dict[textBody[word]] = 1;
        }
      }

      // -- sort the text body from text area
      var sortable = [];
      for(key in dict){
        if(key) sortable.push([dict[key], key]);
      }

      sortable.sort( function(a,b){
        if(a[0] === b[0]){
          var x = a[1].toLowerCase(), y = b[1].toLowerCase();
          return x < y ? -1 : x > y ? 1 : 0;
        }
        return a[0] - b[0];
      });

      // -- append the k/v pair to table
      var table = $('<table></table>').addClass('table');
      for(index in sortable){
        var td1 = '<td style="text-align:left;">' + sortable[index][0] +  '</td>';
        var td2 = '<td style="text-align:right;">' + sortable[index][1] +  '</td>';
        var row = $('<tr></tr>').append(td1 + td2);
        table.append(row);
      }
      $('#output').append(table);


    });
});
</script>


</body>
</html>

