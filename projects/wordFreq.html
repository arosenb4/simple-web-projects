<!DOCTYPE html>
<html lang="en">
<head>
  <title>Word Frequency Counter</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

  <!-- Local CSS -->
  <link rel="stylesheet" href="../css/styles.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://cdn.zingchart.com/zingchart.min.js"></script>


</head>
<body>
<div class="container">
		<div class="header clearfix">
			<nav>
				<ul class="nav nav-pills pull-right">
					<li role="presentation" class="active"><a href="../index.html">Home</a></li>
				</ul>
			</nav>
			<h3 class="text-muted">Simple Web Projects</h3>
		</div>

		<div class="jumbotron">
			<h2>Word Frequency Counter</h2>
			<p class="lead"> A primitive text area and input button facilitate an understanding of HashMaps utilizing Javascript Objects and sorting on both primary and secondary keys.</p>
		</div>
		<hr />

		<div class="row marketing">
			<center>
				<div class="row">
					<textarea id="textBody" class="form-control" rows="9" cols="36">And the Raven, never flitting, still is sitting, still is sitting On the pallid bust of Pallas just above my chamber door; And his eyes have all the seeming of a demon’s that is dreaming, And the lamp-light o’er him streaming throws his shadow on the floor; And my soul from out that shadow that lies floating on the floor Shall be lifted - nevermore!</textarea>
				</div>
				<div class="row" style="padding-top:27px;">
          <p><a id="getCount" class="btn btn-lg btn-info" role="button">Count Words</a></p>
				</div>
          
        <div id="chartDiv" data-scroll-speed="1" style="padding-top:48px; padding-bottom:48px;"> </div>
			</center>
		</div>


		<footer class="footer">
			<p>&copy; 2017 Adam Rosenbaum</p>
		</footer>

	</div> <!-- /container -->




<script>
$(document).ready(function(){


    $("#getCount").click(function(){
			// -- scroll to the chart once button is selected
			$('html,body').animate({
				 scrollTop: $("#chartDiv").offset().top
			});


      // -- read in textbody from text area
			var textBody = $("#textBody").val().replace(/[.,!?;-]/g, '').split(" ");
      var dict = {}
      for(word in textBody){
        if(textBody[word] in dict){
          dict[textBody[word]] +=1;
        }else{
          dict[textBody[word]] = 1;
        }
      }

      // -- sort the text body from text area
      var sortable = [];
      for(key in dict){
        if(key) sortable.push([dict[key], key]);
      }

      sortable.sort( function(a,b){
        if(a[0] === b[0]){
          var x = a[1].toLowerCase(), y = b[1].toLowerCase();
          return x < y ? -1 : x > y ? 1 : 0;
        }
        return a[0] - b[0];
      });


			// -- format the results for plotting
      var x = [], y = [];
      for(index in sortable){
        x.push(sortable[index][1]);
        y.push(sortable[index][0]);
      }


      var chartData = {
            "type": "bar",
            "title": { "text": "Word Use vs Frequency" },
            "scale-x": {
                "zooming": true,
                "zoom-to": [0, 10],
              "labels": x ,
							"item" : { "font-angle":65, "font-size":"16px;" }
              },

            "scale-y": {
							"item" : { "font-size":"16px;" }
              },

            "plotarea":{  
                    "background-color":"#fff",  
                    "margin-bottom": "180px;"
            },
            "scroll-x": {
                "height": "32px",
                "bar": {
                      "background-color": "#DCEDC8",
                      "alpha": 0.5
                    },
                "handle": {
                      "background-color": "#8BC34A"
                    }
              },
            "series": [{
                "values": y 
              }]


          };
					// -- plot the results
          zingchart.render({ // Render Method[3]
            id: "chartDiv",
            data: chartData,
            height: 400,
            width: '100%'
          });
    });
});
</script>


</body>
</html>

